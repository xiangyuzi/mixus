<main class="main">
  <div class="inner">
    <div class="prototype__wrapper">
      <p class="prototype__hedding">
        <%= @idea.catchphrase%>
      </p>
      <%= link_to "by #{@idea.user.first_name}", user_path(@idea.user.id), class: :prototype__user %>
      <%# プロトタイプの投稿者とログインしているユーザーが同じであれば以下を表示する %>
      <% if user_signed_in? && @idea.order == nil %>
        <% if current_user.id == @idea.user_id %>
          <P class="idea-edit">
          <%= link_to "編集する", edit_idea_path, method: :get, class: "item-red-btn" %>
          <p class="or-text">or</p>
          <%= link_to "削除する", idea_path, method: :delete, class:"item-destroy" %>
        <% else %>
          <p class="much-up">
          <%= link_to "much up画面に進む", idea_orders_path(@idea.id) ,class:"item-red-btn"%>
        <% end %>
      <% end %>

      <div class="prototype__image">
        <%= image_tag @idea.image %>
      </div>
      <div class="prototype__body">
        <div class="prototype__detail">
          <p class="detail__title">詳細</p>
          <p class="detail__message">
            <%= @idea.detail %>
          <p class="detail__title">この形でつくってほしい！</p>
            <%= @idea.category.name %>
          </p>
        </div>
      </div>
    </div>
    <div class="prototype__comments">
      <%# match up ユーザーには以下のコメント投稿フォームを表示する %>
      <%# <% if current_user.id == @order.user_id %> 
        <%= form_with model: [@idea, @creation],local: true do |f|%>
          <div class="field">
            <%= f.label :image, "作品の画像" %><br />
            <%= f.file_field :image, id:"prototype_image" %>
          </div>
        <div class='form-text-wrap'>
          <label class="form-text">納期</label>
          <span class="indispensable">必須</span>
        </div>
        <%= f.collection_select(:deadline_id, Deadline.all, :id, :name, {}, {class:"select-box", id:"prefecture"}) %>
        </div>
          <div class="field">
            <%= f.label :comment, "コメント" %><br />
            <%= f.text_field :comment, id:"comment_text" %>
          </div>
          <div class="actions">
            <%= f.submit "送信する", class: :form__btn  %>
          </div>
        <% end %>
      <%# <% end %> 
      <%# <ul class="comments_lists">
        <%# 投稿に紐づくコメントを一覧する処理を記述する %>
        <%# <% @creations.each do |comment| %>
          <%# <li class="comments_list">
            <%= comment.text%>
            <%# <%= link_to comment.user.name, user_path(comment.user.id), class: :comment_user %>
          <%# </li> %>
        <%# <% end %>  
      <%# </ul> %> 
    </div>
  </div>
</main>